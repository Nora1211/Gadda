<!DOCTYPE html>
<html>
<head>
    <title>Library Catalog</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/list.pagination.js/0.1.1/list.pagination.js" integrity="sha512-DgwxWpg8sBTL8c/Q3AB2agigdCpBRVWb3WRNlgaxHWqCNxzv/80XVYXCHSftOrigEF/h8wv+lPjngSAq3fHlGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>   
    
    <link rel="stylesheet" type="text/css" href="css2.css">
<style>
   
</style>
</head>
<body>
    <h1>Library Catalog</h1>

    <div id="catalog">
        

      <p>Explore the four conservation fund that collect Gadda's library:</p>
    
      <ul class="filter-by">
      <button class="btn" id="show-all">Show All </button>

<li><button class="btn filter-button" data-filter="BTB" title="Biblioteca Teatrale del Burcardo">BTB</button>
</li>
<li>
  <button class="btn filter-button" data-filter="BAL" title="Biblioteca dell’archivio liberati">BAL</button>

</li>
<li>
  <button class="btn filter-button" data-filter="BAC" title="Biblioteca dell’archivio contemporaneo “alessandro Bonsanti” del Gabinetto G.P. Vieusseux di Firenze">BAC</button>
</li>

<li>
  <button class="btn filter-button" data-filter="BTM" title="Biblioteca Trivulziana Milano">BTM</button>

</li>
</ul>

   

<p>Visualize only the Text annotated by Gadda:</p>

<ul class="filter-annotation">
<button class="btn" id="show-annotations">Show annotated texts</button>
<button class="btn" id="revert-show-annotations">Show All</button>
</ul>





        <ul class="sort-by">
        <button class="btn btn-danger" onclick="resetList();">Clear</button>

        <button class="btn sort" data-sort="Title">Sort by title</button>
        <button class="btn sort" data-sort="Authors">Sort by author</button>
        <button class="btn sort" data-sort="Years">Sort by year</button>
      </ul>
       

      <div class="search-container">
        <div>
          <h4 class="search-heading">Keyword search</h4>
          <input class="search" placeholder="Search" />
        </div>
        <div>
          <h4 class="search-heading">Filter by book genre:</h4>
          <select id="category-filter">
            <option value="all">All Genres</option>
            <option value="CL">Classical literature</option>
            <option value="FL">French literature</option>
<option value="G">Geography</option>
<option value="GL">German literature</option>
<option value="GR">Foreign languages grammars</option>
<option value="S">History</option>
<option value="SA">History of art</option>
<option value="IL">Italian literature</option>
<option value="L">Literature (generic)</option>
<option value="M">Military</option>
<option value="F">Philosophy</option>
<option value="RL">Russian literature</option>
<option value="SL">Spanish literature</option>
<option value="T">Technology and science</option>
<option value="V">Varia</option>
<option value="D">Vocabularies and dictionaries</option>
          </select>
         
         
          <a href="javascript:void(0);" class="info-link">
            <span class="search-info">
              <b>Search tips</b>
              <br><br> * search for "
              <b>Location</b>" in Bibliography to find all books in archives and private collections<br>* search for "
            </span>
            <span class="custom-icon">
              <img width="20" height="20" src="https://img.icons8.com/ios-glyphs/30/info--v1.png" alt="info--v1"/>            </span>
          </a>



        </div>
      </div>

      
    
        
      
          <div class="searchFil">
              <input type="text" id="search-author" placeholder="Search by Author">
              <input class="searchFil" type="text" id="search-title" placeholder="Search by Title">

          </div>
       

        <a id="AutList" href="ListAuthors.html" target="_blank">Click here to have an overview list of all the authors</a>
  


    
        <ul class="list"></ul>
        <ul class="pagination"></ul>

 
       
 
      </div>

      <script >



        // Sample JSON data
const jsonData = [{"Id":0,
"Authors":"Abba, Giuseppe Cesare",
"Title":"Ricordi garibaldini",
"Cities":"Torino",
"Publisher":"Sten",
"Years":1913,
"Fund":"BTB Segn. 1493",
"Segni":null,
"Category":"IL",
"schede tematiche": "AppLetIt, AppBibIt"
},{
"Id":1,
"Authors":"Abernethy, Silvia M.",
"Title":"Something to read. Qualcosa da leggere in inglese. Letture per gli studenti di inglese",
"Cities":"Firenze  ",
"Publisher":"La Nuova Italia",
"Years":1946,
"Fund":"BTB Segn. 2404",
"Segni":null,
"Category":"GL",
"schede tematiche": "AppLetTed"

}, {
    "Id":3,
    "Authors":"Abraham, Pierre",
    "Title":"Cr\u00e9atures chez Balzac. Recherches sur la r\u00e9alisation intellectuelle. Avec un texte in\u00e9dit de Balzac",
    "Cities":"Paris",
    "Publisher":"NRF-Gallimard",
    "Years":1931,
    "Fund":"BTB Segn. 1116.",
    "Segni":"Nota di possesso autografa in data 10.1931. Pieghe, sottolineature, postille.",
    "Category":"FL",
    "schede tematiche": null
}];


const jsonDataArch = [{
    "N":0,
    "unit\u00e0Id":"unit\u00e0bonsanti-0",
    "archivio":"Archivio Bonsanti",
    "fondo":null,
    "unit\u00e0":"\u00abPiccola antologia 1904\u00bb",
    "serie":"II",
    "sottoserie":"1 Quaderni 1",
    "faldone":null,
    "opera":"Appunti giovanili, scolastici e universitari (politecnico)",
    "schede tematiche":"AppLetIt",
    "anno inizio":1904.0,
    "anno fine":null,
    "mese":null,
    "giorno":null,
    "luogo":null,
    "genere":"Appunti",
    "forma":"Quaderni",
    "tipo":"Documento",
    "contenitore":"1 scatola",
    "sigla":null,
    "descrizione":null,
    "segnatura":null,
    "provenienza":null,
    "lingua":null,
    "sommario":null,
    "Stato di conservazione":null,
    "collana":null,
    "generelib": "IL"
}, {
    "N":0,
    "unit\u00e0Id":"unit\u00e0bonsanti-0",
    "archivio":"Archivio Bonsanti",
    "fondo":null,
    "unit\u00e0":"\u00abPiccola antologia 1904\u00bb",
    "serie":"II",
    "sottoserie":"1 Quaderni 1",
    "faldone":null,
    "opera":"Appunti giovanili, scolastici e universitari (politecnico)",
    "schede tematiche":"AppLetIt, AppLetTed",
    "anno inizio":1904.0,
    "anno fine":null,
    "mese":null,
    "giorno":null,
    "luogo":null,
    "genere":"Appunti",
    "forma":"Quaderni",
    "tipo":"Documento",
    "contenitore":"1 scatola",
    "sigla":null,
    "descrizione":null,
    "segnatura":null,
    "provenienza":null,
    "lingua":null,
    "sommario":null,
    "Stato di conservazione":null,
    "collana":null,
    "generelib": "IL"
}, {
    "N":0,
    "unit\u00e0Id":"unit\u00e0bonsanti-0",
    "archivio":"Archivio Bonsanti",
    "fondo":null,
    "unit\u00e0":"\u00abPiccola antologia 1904\u00bb",
    "serie":"II",
    "sottoserie":"1 Quaderni 1",
    "faldone":null,
    "opera":"Appunti giovanili, scolastici e universitari (politecnico)",
    "schede tematiche":"AppBibIt",
    "anno inizio":1904.0,
    "anno fine":null,
    "mese":null,
    "giorno":null,
    "luogo":null,
    "genere":"Appunti",
    "forma":"Quaderni",
    "tipo":"Documento",
    "contenitore":"1 scatola",
    "sigla":null,
    "descrizione":null,
    "segnatura":null,
    "provenienza":null,
    "lingua":null,
    "sommario":null,
    "Stato di conservazione":null,
    "collana":null,
    "generelib": "IL"
}];
    
    const file2Data =[{
        "Id":3.0,
        "Nota di possesso":"\u00abCarlo Emilio Gadda \u2013 ottobre 1931-\u00bb",
        "Dedica":null,
        "Collocazione":"[p. 61 rr. 1-9 \u00abMais nous commen\u00e7ons \u00e0 conna\u00eetre la d\u00e9marche de ses anxi\u00e9t\u00e9s nocturnes: a nous commen\u00e7ons \u00e0 savoir le point \u00e0 partir duquel Balzac se s\u00e9pare de son exp\u00e9rience v\u00e9cue pour forger l'\u00eatre fictif auquel il va communiquer toute la force tragique de ses propres imaginations. Si la mort de l'enfant, si la mort de la jeune fille s\u00e9duite, si ce fait-divers bouleversant n'a jamais exist\u00e9 pour lui, est-on en droit de dire que rien n'aurait pu le causer?\u00bb].",
        "Postilla parlata":"dopo la promesse { \u201cmeschinit\u00e0 --> dalle immagini alla biografia",
        "Postilla muta":"Sottolineature"
    }];
    
    /// Display the items in the UI
    const matchingItemsContainer = document.querySelector('.list-matching-items');

// Clear the existing content

const handleSchedeTematicheClick = (schedeTematiche) => {
  // Split the string into an array of values
  const schedeTematicheArray = schedeTematiche.split(',').map(value => value.trim());

  // Filter items in jsonDataArch based on partial match with each value
  const matchingItems = [];

  schedeTematicheArray.forEach(value => {
    const filteredDataArch = jsonDataArch.filter(dataArchItem =>
      dataArchItem["schede tematiche"] && dataArchItem["schede tematiche"].includes(value)
    );
    matchingItems.push(...filteredDataArch);
  });

  // Convert the filtered items to JSON
  const matchingItemsJson = JSON.stringify(matchingItems);

  // Build the URL for the matchingItems.html page with the matching items as a parameter
  const url = `result.html?matchingItems=${encodeURIComponent(matchingItemsJson)}`;

  // Navigate to the new page
  window.location.href = url;
};



// Rest of your List.js code
const options = {
  valueNames: ['Authors', 'Title', 'Cities', 'Publisher', 'Years', 'Fund', 'Category'],
  page: 5,
  pagination: true,
  item: function (item, options) {
    // Create an array of links for the matching items in file2Data
    const matchingItems = file2Data.filter((file2Item) => file2Item.Id === item.Id);
    let links = '';

    if (matchingItems.length > 0) {
      links = `<a href="Postille.html?id=${item.Id}">View annotations </a>`;
    }

    // Check if schede tematiche is not null before including the span element
    const schedeTematicheSpan = item["schede tematiche"] !== null ? `<span class="SchedeTematiche" onclick="handleSchedeTematicheClick('${item["schede tematiche"]}')">${item["schede tematiche"]}</span><br>` : '';

    return `<li>
      <strong class="Authors">${item.Authors}</strong><br>
      <span class="Title">${item.Title}</span><br>
      <span class="Cities">${item.Cities}</span>
      <span class="Publisher">,</span>
      <span class="Years">${item.Years}</span><br>
      <span class="Fund">${item.Fund}</span><br>
      <span class="Segni">${item.Segni}</span><br>
      <span class="Category">${item.Category}</span><br>
      ${schedeTematicheSpan}
      ${links}
    </li>`;
  }
};

const userList = new List('catalog', options, jsonData);



   
   
</script>
</body>
</html>  